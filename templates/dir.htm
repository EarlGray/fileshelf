{% extends "tmpl.htm" %}
{% block body %}
<h2>
  <a href="{{ url_for('path_handler') }}">FS:</a> {% for prefix, href in path_prefixes %} / <a href="{{ href }}">{{ prefix }}</a>{% endfor %}
</h2>
<hr/>
<table>
  <tr>
    <th></th>
    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; filename &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
    <th>&nbsp;&nbsp;&nbsp;&nbsp; type &nbsp;&nbsp;&nbsp;</th>
    <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
    <th>&nbsp;&nbsp;&nbsp;&nbsp; access &nbsp;&nbsp;&nbsp;&nbsp;</th>
    <th>action</th>
  </tr>
  {% for entry in lsdir %}
  <tr class="dir-entry-row">
    <td class="dir-entry-icon">{% if entry.isdir %}
      <img src="{{ url_for('static_handler', path='dir.png') }}" alt="dir" width="16"/>
      {% else %}
      <img src="{{ url_for('static_handler', path='file.png') }}" alt="file" width="16"/>
      {% endif %}
    </td>
    <td class="dir-entry-name">
      {% if rename == entry.name %}
      <form method="POST">
        <input type="hidden" name="action" value="rename">
        <input type="hidden" name="oldname" value="{{ entry.name }}">
        <input type="text" name="newname" value="{{ entry.name }}" autofocus>
        <input type="submit" value="rename">
      </form>
      {% else %}
      <a href="{{ entry.href }}">{{ entry.name }}</a>
      {% endif %}
    </td>
    <td class="small dir-entry-type">{{ entry.mime }}</td>
    <td class="pull-right dir-entry-size">{{ entry.size }}</td>
    <td class="pull-right dir-entry-access">
      {% if entry.shared %}
      <a class="entry-info" href="{{ entry.shared }}">public</a>
      {% elif not entry.isdir %}
      <form class="hoverable" action="" method="POST">
        <input type="hidden" name="action" value="share">
        <input type="hidden" name="file" value="{{ entry.name }}">
        <input type="submit" name="share" value="share">
      </form>
      {% endif %}
    </td>
    <td class="dir-entry-action">
      <a href="{{ entry.rename_url }}" class="hoverable">
        <input type="button" value="rename">
      </a>
      <form class="hoverable" action="" method="POST">
        <input type="hidden" name="action" value="delete">
        <input type="hidden" name="filename" value="{{ entry.name }}">
        <input type="submit" name="delete" value="delete">
      </form>
    </td>
  </tr> {% endfor %}
</table>
<hr/>
<form action="" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="action" value="upload">
  <input type="file" name="file"/>
  <input type="submit" name="upload" value="Upload"/>
</form>
{% endblock %}
<!-- vim : set sts=2 sw=2 -->
